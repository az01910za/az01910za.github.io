<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="John Doe"><link rel="alternative" href="/atom.xml" title="昵称不可为空" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>dvwa - 昵称不可为空</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">昵称不可为空</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/tags">标签</a></li><li class="head-nav__item"><a class="head-nav__link" href="/archives">目录</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time class="post__time" datetime="2019-07-28T12:48:28.934Z">2019 - 07 - 28 20:48:28</time><h1 class="post__title"><a href="/2019/07/28/dvwa/">dvwa</a></h1><div class="post__main echo"><h2 id="dvwa搭建"><a href="#dvwa搭建" class="headerlink" title="dvwa搭建"></a>dvwa搭建</h2><p>[root@localhost ~]# mkdir dvwa<br>[root@localhost dvwa]# wget <a href="https://github.com/ethicalhack3r/DVWA/archive/master.zip" target="_blank" rel="noopener">https://github.com/ethicalhack3r/DVWA/archive/master.zip</a><br>[root@localhost dvwa]# unzip master.zip<br>[root@localhost dvwa]# cp -r DVWA-master/ /var/www/html</p>
<h3 id="在主机浏览器输入虚拟机ip-DVWA-master-出现错误"><a href="#在主机浏览器输入虚拟机ip-DVWA-master-出现错误" class="headerlink" title="在主机浏览器输入虚拟机ip/DVWA-master/ 出现错误"></a>在主机浏览器输入虚拟机ip/DVWA-master/ 出现错误</h3><p>DVWA System error - config file not found. Copy config/config.inc.php.dist to config/config.inc.php and configure to your environment.的解决办法</p>
<p>在config目录下，将config.inc.php.dist后面的.dist后缀去掉，使它成为一个PHP文件。<br>[root@localhost html]# cd DVWA-master/<br>[root@localhost DVWA-master]# cd config/<br>[root@localhost config]# cp config.inc.php.dist config.inc.php.dist.bak<br>[root@localhost config]# mv config.inc.php.dist config.inc.php<br>之后就可以打开</p>
<h3 id="问题：PHP-function-allow-url-include-Disabled"><a href="#问题：PHP-function-allow-url-include-Disabled" class="headerlink" title="问题：PHP function allow_url_include: Disabled"></a>问题：PHP function allow_url_include: Disabled</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">处理：编缉/etc/php.ini将allow_url_include值由Off改为On</span><br></pre></td></tr></table></figure>

<h3 id="问题：PHP-module-gd-Missing"><a href="#问题：PHP-module-gd-Missing" class="headerlink" title="问题：PHP module gd: Missing"></a>问题：PHP module gd: Missing</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">处理：yum install -y php-gd</span><br></pre></td></tr></table></figure>

<h3 id="问题：reCAPTCHA-key-Missing"><a href="#问题：reCAPTCHA-key-Missing" class="headerlink" title="问题：reCAPTCHA key: Missing"></a>问题：reCAPTCHA key: Missing</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">处理：编缉dvwa/config/config.inc.php</span><br><span class="line">     配置<span class="variable">$_DVWA</span>[ <span class="string">'recaptcha_public_key'</span> ]  = <span class="string">'6LdK7xITAAzzAAJQTfL7fu6I-0aPl8KHHieAT_yJg'</span>;</span><br><span class="line">     配置<span class="variable">$_DVWA</span>[ <span class="string">'recaptcha_private_key'</span> ] = <span class="string">'6LdK7xITAzzAAL_uw9YXVUOPoIHPZLfw2K1n5NVQ'</span>;</span><br></pre></td></tr></table></figure>

<p>[User: apache] Writable folder /var/www/html/DVWA-master/hackable/uploads/: No<br>[User: apache] Writable file /var/www/html/DVWA-master/external/phpids/0.6/lib/IDS/tmp/phpids_log.txt: No<br>[User: apache] Writable folder /var/www/html/DVWA-master/config: No</p>
<p>解决办法：<br>sudo chmod 777 /opt/lampp/htdocs/DVWA-master/hackable/uploads/<br>sudo chmod 777  DVWA-master/external/phpids/0.6/lib/IDS/tmp/phpids_log.txt<br>sudo chmod 777 DVWA-master/config<br>或者chown apache:apache -R /var/www/html/DVWA-master/</p>
<p>问题：<br>Could not connect to the MySQL service.<br>Please check the config file.<br>Your database user is root, if you are using MariaDB, this will not work, please read the README.md file.<br>如果你使用的是MariaDB的数据库的话，你不能够直接使用数据库的root用户，你必须新建一个新的数据库用户。</p>
<p>[root@localhost DVWA]# mysql -uroot -p<br>MariaDB [(none)]&gt; create database dvwa;<br>MariaDB [(none)]&gt; grant all on dvwa.*  to  dvwa@localhost identified by ‘123456’;<br>注意此处的123456是指你为dvwa这个数据库用户设置的密码。<br>MariaDB [(none)]&gt; flush privileges;<br>MariaDB [(none)]&gt; exit<br>[root@localhost DVWA]# systemctl restart mariadb.service<br>重启mysql服务。<br>[root@localhost config]# vim config.inc.php</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$_DVWA</span>[<span class="string">'db_server'</span> ]   = <span class="string">'localhost'</span>;</span><br></pre></td></tr></table></figure>

<p>centos7必须把127.0.0.1改为localhost</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$_DVWA</span>[<span class="string">'db_database'</span> ] = <span class="string">'dvwa'</span>;</span><br><span class="line"><span class="variable">$_DVWA</span>[ <span class="string">'db_user'</span>]     = <span class="string">'dvwa'</span>;</span><br><span class="line"><span class="variable">$_DVWA</span>[<span class="string">'db_password'</span> ] = <span class="string">'123456'</span>;</span><br></pre></td></tr></table></figure>

<p>然后我们还要解决一下PHP的配置问题<br>通常我们使用yum命令安装的PHP的配置文件都会存放在 /etc 目录下的一个叫php.ini的文件。<br>[root@localhost config]# vim /etc/php.ini<br>Allow_url_include = On<br>成功<br>账号admin  密码password</p>
<h2 id="安装sqli-labs"><a href="#安装sqli-labs" class="headerlink" title="安装sqli-labs"></a>安装sqli-labs</h2><p>Powershell在桌面打开，将桌面文件压缩包放到虚拟机里<br>PS C:\Users\ZWH\Desktop&gt; scp sqli-labs-master.zip <a href="mailto:root@192.168.31.184" target="_blank" rel="noopener">root@192.168.31.184</a>:/root</p>
<p><a href="https://github.com/audi-1/sqli-labs" target="_blank" rel="noopener">https://github.com/audi-1/sqli-labs</a><br>从github上下载，解压放到/var/www/html<br>chown apache:apache -R sqli-labs-master<br>cd sqli-labs-master/sql-connections/<br>vim db-creds.inc<br>将dbuser =‘root’;和dbpass=’root’改为自己数据库用户名和密码<br>systemctl restart httpd<br>在主机输入ip/sqli-labs-master就可以登录使用</p>
</div></header></article><section class="reward"><a class="btn-reward" href="#">打赏</a><div class="reward-wrapper clearfix"><img src="/img/wechat.png" title="微信"></div></section></main><footer class="foot"><div class="foot-copy">&copy; 2016 - 2019 John Doe</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>